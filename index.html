<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real Estate Investment Calculator</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>

<body>
    <div class="container">
        <header>
            <h1>Real Estate Investment Calculator</h1>
            <p class="subtitle">Analyze your property investment with debt and ROI projections</p>
        </header>

        <div class="content-grid">
            <!-- Input Section -->
            <section class="card input-section">
                <h2>Investment Details</h2>

                <div class="form-group">
                    <label for="propertyWorth">Property Worth (Market Value)</label>
                    <div class="input-wrapper">
                        <span class="currency">‚Ç¨</span>
                        <input type="number" id="propertyWorth" value="400000" step="1000">
                    </div>
                </div>

                <div class="form-group">
                    <label for="purchasePrice">Purchase Price (Amount Paid)</label>
                    <div class="input-wrapper">
                        <span class="currency">‚Ç¨</span>
                        <input type="number" id="purchasePrice" value="380000" step="1000">
                    </div>
                </div>

                <div class="form-group">
                    <label for="additionalCosts">Additional Costs (Closing, Renovation, etc.)</label>
                    <div class="input-wrapper">
                        <span class="currency">‚Ç¨</span>
                        <input type="number" id="additionalCosts" value="20000" step="1000">
                    </div>
                </div>

                <div class="form-group">
                    <label for="expectedRent">Expected Monthly Rent</label>
                    <div class="input-wrapper">
                        <span class="currency">‚Ç¨</span>
                        <input type="number" id="expectedRent" value="2000" step="50">
                    </div>
                </div>

                <h3>Investment Start Date</h3>

                <div class="date-inputs">
                    <div class="form-group">
                        <label for="startMonth">Month</label>
                        <select id="startMonth">
                            <option value="0">January</option>
                            <option value="1">February</option>
                            <option value="2">March</option>
                            <option value="3">April</option>
                            <option value="4">May</option>
                            <option value="5">June</option>
                            <option value="6">July</option>
                            <option value="7">August</option>
                            <option value="8">September</option>
                            <option value="9">October</option>
                            <option value="10">November</option>
                            <option value="11" selected>December</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="startYear">Year</label>
                        <input type="number" id="startYear" value="2025" min="2020" max="2050">
                    </div>
                </div>

                <h3>Debt Information</h3>

                <div class="form-group">
                    <label for="debtAmount">Total Debt Amount</label>
                    <div class="input-wrapper">
                        <span class="currency">‚Ç¨</span>
                        <input type="number" id="debtAmount" value="320000" step="1000">
                    </div>
                </div>

                <div class="form-group">
                    <label for="monthlyPayment">Monthly Debt Payment</label>
                    <div class="input-wrapper">
                        <span class="currency">‚Ç¨</span>
                        <input type="number" id="monthlyPayment" value="1500" step="50">
                    </div>
                </div>

                <div class="form-group">
                    <label for="interestRate">Annual Interest Rate</label>
                    <div class="input-wrapper">
                        <input type="number" id="interestRate" value="3.5" step="0.1">
                        <span class="currency">%</span>
                    </div>
                </div>

                <h3>German Tax Benefits</h3>

                <div class="form-group checkbox-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="applyGermanTax">
                        <span>Apply German Tax Relief (AfA & Deductions)</span>
                    </label>
                </div>

                <div id="taxFields" class="tax-fields" style="display: none;">
                    <div class="form-group">
                        <label for="buildingValue">Building Value (excl. Land)</label>
                        <div class="input-wrapper">
                            <span class="currency">‚Ç¨</span>
                            <input type="number" id="buildingValue" value="300000" step="1000">
                        </div>
                        <small class="help-text">Only the building depreciates, not the land</small>
                    </div>

                    <div class="form-group">
                        <label for="taxRate">Personal Income Tax Rate</label>
                        <div class="input-wrapper">
                            <input type="number" id="taxRate" value="30" step="1" min="0" max="45">
                            <span class="currency">%</span>
                        </div>
                        <small class="help-text">Your marginal tax rate (25-45%)</small>
                    </div>

                    <div class="form-group">
                        <label for="annualExpenses">Annual Deductible Expenses</label>
                        <div class="input-wrapper">
                            <span class="currency">‚Ç¨</span>
                            <input type="number" id="annualExpenses" value="2000" step="100">
                        </div>
                        <small class="help-text">Maintenance, insurance, property tax, etc.</small>
                    </div>
                </div>

                <div class="optimization-targets">
                    <h3>Optimization Targets</h3>
                    <div class="form-group">
                        <label for="targetCashFlow">Target Monthly Cash Flow</label>
                        <div class="input-wrapper">
                            <span class="currency">‚Ç¨</span>
                            <input type="number" id="targetCashFlow" value="0" step="10">
                        </div>
                        <small class="help-text">Desired profit after tax (0 for break-even)</small>
                    </div>

                    <div class="form-group">
                        <label for="targetRepayment">Target Initial Repayment</label>
                        <div class="input-wrapper">
                            <input type="number" id="targetRepayment" value="2.0" step="0.1" min="0">
                            <span class="currency">%</span>
                        </div>
                        <small class="help-text">Desired amortization rate</small>
                    </div>
                </div>

                <div class="button-group">
                    <button id="optimizeBtn" class="btn-secondary">Optimize for Tenant</button>
                    <button id="calculateBtn" class="btn-primary">Calculate</button>
                </div>
            </section>

            <!-- Results Section -->
            <section class="card results-section">
                <h2>Financial Overview</h2>

                <div class="metrics-grid">
                    <div class="metric-card">
                        <span class="metric-label">Total Investment</span>
                        <span class="metric-value" id="totalInvestment">‚Ç¨0</span>
                    </div>

                    <div class="metric-card">
                        <span class="metric-label">Monthly Cash Flow</span>
                        <span class="metric-value" id="monthlyCashFlow">‚Ç¨0</span>
                    </div>

                    <div class="metric-card">
                        <span class="metric-label">Time to Payoff</span>
                        <span class="metric-value" id="payoffTime">0 years</span>
                    </div>

                    <div class="metric-card">
                        <span class="metric-label">Total Interest Paid</span>
                        <span class="metric-value" id="totalInterest">‚Ç¨0</span>
                    </div>

                    <div class="metric-card">
                        <span class="metric-label">Break-even Point</span>
                        <span class="metric-value" id="breakEven">0 years</span>
                    </div>

                    <div class="metric-card">
                        <span class="metric-label">ROI (10 years)</span>
                        <span class="metric-value" id="roi10">0%</span>
                    </div>

                    <div class="metric-card" id="taxSavingsCard" style="display: none;">
                        <span class="metric-label">Annual Tax Savings</span>
                        <span class="metric-value positive" id="annualTaxSavings">‚Ç¨0</span>
                    </div>
                </div>

                <!-- Tax Breakdown Section -->
                <div id="taxBreakdown" class="tax-breakdown" style="display: none;">
                    <h3>Tax Deduction Breakdown</h3>
                    <div class="breakdown-items">
                        <div class="breakdown-item">
                            <div class="breakdown-label">
                                <span class="icon">üèóÔ∏è</span>
                                <span>Building Depreciation (AfA 2%)</span>
                            </div>
                            <div class="breakdown-value" id="afaAmount">‚Ç¨0</div>
                        </div>
                        <div class="breakdown-item">
                            <div class="breakdown-label">
                                <span class="icon">üí∞</span>
                                <span>Mortgage Interest</span>
                            </div>
                            <div class="breakdown-value" id="interestAmount">‚Ç¨0</div>
                        </div>
                        <div class="breakdown-item">
                            <div class="breakdown-label">
                                <span class="icon">üîß</span>
                                <span>Other Expenses</span>
                            </div>
                            <div class="breakdown-value" id="expensesAmount">‚Ç¨0</div>
                        </div>
                        <div class="breakdown-separator"></div>
                        <div class="breakdown-item total">
                            <div class="breakdown-label">
                                <strong>Total Deductible</strong>
                            </div>
                            <div class="breakdown-value" id="totalDeductible">‚Ç¨0</div>
                        </div>
                        <div class="breakdown-item highlight">
                            <div class="breakdown-label">
                                <span class="icon">‚úÖ</span>
                                <strong>Tax Savings (at <span id="displayTaxRate">30</span>%)</strong>
                            </div>
                            <div class="breakdown-value positive" id="taxSavingsBreakdown">‚Ç¨0</div>
                        </div>
                    </div>
                    <p class="breakdown-note">
                        üí° <strong>How it works:</strong> These amounts reduce your taxable income.
                        The tax savings = Total Deductible √ó Your Tax Rate
                    </p>
                </div>
            </section>
        </div>

        <!-- Charts Section -->
        <div class="charts-grid">
            <section class="card chart-container">
                <h3>Debt Payoff Timeline</h3>
                <canvas id="debtChart"></canvas>
            </section>

            <section class="card chart-container">
                <h3>Monthly Cash Flow</h3>
                <canvas id="monthlyCashFlowChart"></canvas>
            </section>

            <section class="card chart-container">
                <h3>Cumulative Cash Flow</h3>
                <canvas id="cashFlowChart"></canvas>
            </section>

            <section class="card chart-container" id="taxSavingsChartContainer" style="display: none;">
                <h3>Annual Tax Savings Over Time</h3>
                <canvas id="taxSavingsChart"></canvas>
            </section>

            <section class="card chart-container full-width">
                <h3>Return on Investment Over Time</h3>
                <canvas id="roiChart"></canvas>
            </section>
        </div>
    </div>

    <script src="dist/bundle.js"></script>
</body>

</html>